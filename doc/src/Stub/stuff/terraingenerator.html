<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Terrain Generator Documentation parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Terrain Generator Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{page-description}">
    <meta name="author" content="Attila Szabo">
    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="https://github.com/aszabo314/FSketch">github page</a></li>
        </ul>
        <h3 class="muted">Terrain Generator</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <p><img src="teaser.png" alt="Fractal Terrain Generator" /></p>

<h1><a name="Fractal-Terrain-Generator" class="anchor" href="#Fractal-Terrain-Generator">Fractal Terrain Generator</a></h1>

<p>This is the documentation for my Fractal Terrain Generator project, <a href="https://github.com/aszabo314/FSketch">available on github</a>. The project is also
an example implementation using the Aardvark libraries for information visualization and rendering, <a href="https://github.com/vrvis/aardvark">found on
github here</a>, as well as an example for an interactive program written in F# and a practical exploration of functional 
programming in general.</p>

<h3><a name="Contents" class="anchor" href="#Contents">Contents</a></h3>

<ul>
<li><a href="#Fractal-Terrain-Generator">Index</a></li>
<li><a href="#FSharp-crash-course">F# crash course</a></li>
<li><a href="#Incremental-evaluation-The-Mod-System"><em>The Mod system</em></a></li>
<li><a href="#Scene-Graph-and-Shaders">Scene Graph and Shaders</a></li>
<li><a href="#Building-an-app">Building an app</a></li>
</ul>

<p>The Fractal Terrain Generator implements a simple tool for generating and visualizing fractal terrains based on the midpoint displacement algorithm.
There are a few parameters to determine the shape of the terrain. A new one is generated per button click.
The user can interact with the terrain by changing some rendering settings and playing with the colors.</p>

<p>The app is built using the Aardvark libraries and on <em>Microsoft .NET</em>. I write in F#. If you don't know any F#, there are great learning resources at
<a href="http://fsharp.org/">fsharp.org</a> and there are tutorials with a cool web-based interactive shell at <a href="http://www.tryfsharp.org/">tryfsharp.org</a>. However, there will be 
a quick refresher on F# practical concepts and features used in this project <a href="#FSharp-crash-course">in the following chapter</a>.</p>

<p><a href="https://github.com/vrvis/aardvark">Aardvark</a> is a collection of libraries for real-time rendering and visualization developed at the <a href="http://www.vrvis.at/">VRVis Research Center</a> since 2006. 
Aardvark also provides a framework for incremental adaptive computation, henceforth referred to as <em>The Mod System</em>. The Mod System
includes tools to describe the data flow within the program in a declarative style. This is usually different from what most people would call
the traditional OOP style, which is why some code might look weird at first glance.</p>

<p>For the 3D rendering, Aardvark's <a href="http://dl.acm.org/citation.cfm?id=2790073">incremental rendering VM</a> and the <a href="https://github.com/vrvis/aardvark.rendering">Aardvark.Rendering</a> are used. Shaders are built with <a href="http://www.fshade.org/">Fshade, composable shaders for F#</a>,
which is <a href="https://github.com/vrvis/aardvark.rendering">Aardvark.Rendering</a>'s primary shader language.</p>

<h2><a name="FSharp-crash-course" class="anchor" href="#FSharp-crash-course">FSharp crash course</a></h2>

<p>F# is a multi-paradigm language that includes functional programming concepts, and encourages a declarative programming style. It is being developed by
Microsoft and the F# Software Foundation and it is most oftenly used as a CLI language that compiles into code for the Microsoft CLR. Because F# can closely
interoperate with Microsoft .NET and it is possible to write code in an already established traditional imperative fashion, it is often considered a safe choice
for trying out functional programming for the first time. However, F# highly encourages the functional style, and cleanly written F# code is usually very
concise, readable and free of bugs.</p>

<h3><a name="Basics" class="anchor" href="#Basics">Basics</a></h3>

<p>A fresh F# program can look like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">namespace</span> <span class="i">Tutorial</span>
</code></pre></td>
</tr>
</table>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 4)" onmouseover="showTip(event, 'fs2', 4)" class="i">System</span>

<span class="k">module</span> <span class="t">Program</span> <span class="o">=</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="t">Fruit</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="p">Apple</span>
               | <span onmouseout="hideTip(event, 'fs6', 7)" onmouseover="showTip(event, 'fs6', 7)" class="p">Pear</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="t">Product</span> <span class="o">=</span>
        {
            <span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="i">Ware</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 10)" onmouseover="showTip(event, 'fs4', 10)" class="t">Fruit</span>
            <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="i">Price</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="t">int</span>
        }

    [&lt;<span onmouseout="hideTip(event, 'fs1', 13)" onmouseover="showTip(event, 'fs1', 13)" class="t">EntryPoint</span>&gt;]
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="f">main</span> <span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="i">argv</span> <span class="o">=</span> 
        
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="i">money</span> <span class="o">=</span> <span class="n">50</span>

        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 17)" onmouseover="showTip(event, 'fs14', 17)" class="i">stock</span> <span class="o">=</span> 
            [
                { <span class="i">Ware</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 18)" onmouseover="showTip(event, 'fs5', 18)" class="p">Apple</span>; <span class="i">Price</span> <span class="o">=</span> <span class="n">15</span> }
                { <span class="i">Ware</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 19)" onmouseover="showTip(event, 'fs5', 19)" class="p">Apple</span>; <span class="i">Price</span> <span class="o">=</span> <span class="n">16</span> }
                { <span class="i">Ware</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 20)" onmouseover="showTip(event, 'fs6', 20)" class="p">Pear</span>; <span class="i">Price</span> <span class="o">=</span> <span class="n">30</span> }
            ]

        <span class="c">// I want to buy all apples</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 21)" onmouseover="showTip(event, 'fs15', 21)" class="i">shoppingBasket</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="i">stock</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 23)" onmouseover="showTip(event, 'fs16', 23)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 24)" onmouseover="showTip(event, 'fs17', 24)" class="f">filter</span> ( <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 25)" onmouseover="showTip(event, 'fs18', 25)" class="i">i</span> <span class="k">-&gt;</span> <span class="k">match</span> <span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="i">i</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 27)" onmouseover="showTip(event, 'fs8', 27)" class="i">Ware</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs5', 28)" onmouseover="showTip(event, 'fs5', 28)" class="p">Apple</span> <span class="k">-&gt;</span> <span class="k">true</span> | <span onmouseout="hideTip(event, 'fs6', 29)" onmouseover="showTip(event, 'fs6', 29)" class="p">Pear</span> <span class="k">-&gt;</span> <span class="k">false</span> )

        <span class="c">// Do I have enough money?</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="i">checkout</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 31)" onmouseover="showTip(event, 'fs15', 31)" class="i">shoppingBasket</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 32)" onmouseover="showTip(event, 'fs16', 32)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="f">fold</span> ( <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs21', 34)" onmouseover="showTip(event, 'fs21', 34)" class="i">xs</span> <span onmouseout="hideTip(event, 'fs22', 35)" onmouseover="showTip(event, 'fs22', 35)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs21', 36)" onmouseover="showTip(event, 'fs21', 36)" class="i">xs</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs9', 38)" onmouseover="showTip(event, 'fs9', 38)" class="i">Price</span> ) <span class="n">0</span>

        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs19', 39)" onmouseover="showTip(event, 'fs19', 39)" class="i">checkout</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs13', 40)" onmouseover="showTip(event, 'fs13', 40)" class="i">money</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs23', 41)" onmouseover="showTip(event, 'fs23', 41)" class="f">printf</span> <span class="s">&quot;Buy all the apples!&quot;</span>
        <span class="k">else</span>
            <span onmouseout="hideTip(event, 'fs23', 42)" onmouseover="showTip(event, 'fs23', 42)" class="f">printf</span> <span class="s">&quot;Not enough cash :(&quot;</span>

        <span class="n">0</span>
        
</code></pre></td>
</tr>
</table>

<p>Let's go through this. The <code>let</code> statement binds a value to a name.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 44)" onmouseover="showTip(event, 'fs25', 44)" class="i">x</span> <span class="o">=</span> <span class="n">1</span>           <span class="c">//immutable binding. Can not be changed</span>
    
    <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs26', 45)" onmouseover="showTip(event, 'fs26', 45)" class="v">y</span> <span class="o">=</span> <span class="n">1</span>   <span class="c">//mutable binding. Can be changed </span>
    <span onmouseout="hideTip(event, 'fs26', 46)" onmouseover="showTip(event, 'fs26', 46)" class="v">y</span> <span class="o">&lt;-</span> <span class="n">2</span>              <span class="c">//using the assignment operator</span>
</code></pre></td>
</tr>
</table>

<p>After a value has been let-bound to a name, that binding can never be changed. This is very practical because it ensures all your variables
contain exactly the values you expect them to. Mutable bindings are dangerous because variables can change over time, and should be limited in use.</p>

<p>The value of a binding is the last statement in its block. A block is defined by indentation - be careful about that! Therefore, a let-binding can
also look like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 47)" onmouseover="showTip(event, 'fs27', 47)" class="i">rockstar</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 48)" onmouseover="showTip(event, 'fs28', 48)" class="i">guitar</span> <span class="o">=</span> <span class="n">5</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs29', 49)" onmouseover="showTip(event, 'fs29', 49)" class="i">bass</span> <span class="o">=</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 50)" onmouseover="showTip(event, 'fs30', 50)" class="i">strings</span> <span class="o">=</span> <span class="n">13</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs31', 51)" onmouseover="showTip(event, 'fs31', 51)" class="i">frets</span> <span class="o">=</span> <span class="n">8</span>
            <span onmouseout="hideTip(event, 'fs30', 52)" onmouseover="showTip(event, 'fs30', 52)" class="i">strings</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs31', 53)" onmouseover="showTip(event, 'fs31', 53)" class="i">frets</span>
        <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs32', 54)" onmouseover="showTip(event, 'fs32', 54)" class="v">drums</span> <span class="o">=</span> <span class="n">3</span>
        <span onmouseout="hideTip(event, 'fs32', 55)" onmouseover="showTip(event, 'fs32', 55)" class="v">drums</span> <span class="o">&lt;-</span> <span class="n">2</span>
        <span onmouseout="hideTip(event, 'fs28', 56)" onmouseover="showTip(event, 'fs28', 56)" class="i">guitar</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs29', 57)" onmouseover="showTip(event, 'fs29', 57)" class="i">bass</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs32', 58)" onmouseover="showTip(event, 'fs32', 58)" class="v">drums</span>

    <span onmouseout="hideTip(event, 'fs23', 59)" onmouseover="showTip(event, 'fs23', 59)" class="f">printf</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs27', 60)" onmouseover="showTip(event, 'fs27', 60)" class="i">rockstar</span>
    <span class="c">// the value of rockstar is 28</span>
</code></pre></td>
</tr>
</table>

<p>The program starts at a single let-binding marked with the <code>[&lt;EntryPoint&gt;]</code> attribute. By convention, it has to be a function taking a single 
string[] argument and returning an integer, like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    [&lt;<span onmouseout="hideTip(event, 'fs1', 61)" onmouseover="showTip(event, 'fs1', 61)" class="t">EntryPoint</span>&gt;]
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 62)" onmouseover="showTip(event, 'fs33', 62)" class="f">main</span> <span onmouseout="hideTip(event, 'fs12', 63)" onmouseover="showTip(event, 'fs12', 63)" class="i">argv</span> <span class="o">=</span> 
        <span class="n">0</span>
</code></pre></td>
</tr>
</table>

<h3><a name="Functions" class="anchor" href="#Functions">Functions</a></h3>

<p>Functions are first-class citizens in F#. That means that functions can be let-bound to names and passed around the program exactly the 
same way as values can. The program Entry Point is a function. To define a function, you write a let-binding followed some parameters. Functions can
look like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 64)" onmouseover="showTip(event, 'fs34', 64)" class="f">mult</span> <span onmouseout="hideTip(event, 'fs35', 65)" onmouseover="showTip(event, 'fs35', 65)" class="i">a</span> <span onmouseout="hideTip(event, 'fs36', 66)" onmouseover="showTip(event, 'fs36', 66)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 67)" onmouseover="showTip(event, 'fs35', 67)" class="i">a</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs36', 68)" onmouseover="showTip(event, 'fs36', 68)" class="i">b</span>        <span class="c">//a and b are separate arguments.</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 69)" onmouseover="showTip(event, 'fs37', 69)" class="f">timesTwo</span> <span onmouseout="hideTip(event, 'fs36', 70)" onmouseover="showTip(event, 'fs36', 70)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 71)" onmouseover="showTip(event, 'fs34', 71)" class="f">mult</span> <span class="n">2</span> <span onmouseout="hideTip(event, 'fs36', 72)" onmouseover="showTip(event, 'fs36', 72)" class="i">b</span>   <span class="c">//Currying. the first argument is fixed with a value and the second argument is left free.</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 73)" onmouseover="showTip(event, 'fs38', 73)" class="f">sum</span> (<span onmouseout="hideTip(event, 'fs35', 74)" onmouseover="showTip(event, 'fs35', 74)" class="i">a</span>,<span onmouseout="hideTip(event, 'fs36', 75)" onmouseover="showTip(event, 'fs36', 75)" class="i">b</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 76)" onmouseover="showTip(event, 'fs35', 76)" class="i">a</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs36', 77)" onmouseover="showTip(event, 'fs36', 77)" class="i">b</span>       <span class="c">//(a,b) is a 2-tuple of arguments. This can not be curried.</span>
    
</code></pre></td>
</tr>
</table>

<p>Make sure to check the types of names by hovering over them. In the functional style, all functions have to return the same value for the same parameters.
Therefore, correctness in types guarantees correctness of the program. The types of functions usually look like <code>'a -&gt; 'b -&gt; 'c</code>. In this notation, all 
types except the last one <code>'a</code> and <code>'b</code> are the types of the arguments, while the last one <code>'c</code> is the return type. The arrows inbetween <code>-&gt;</code> separate the
types from each other. Arguments can have their type annotated using <code>:</code>. A function taking one function and producing something could be this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 78)" onmouseover="showTip(event, 'fs39', 78)" class="f">applyFunction</span> ( <span onmouseout="hideTip(event, 'fs40', 79)" onmouseover="showTip(event, 'fs40', 79)" class="f">f</span> <span class="o">:</span> (<span onmouseout="hideTip(event, 'fs10', 80)" onmouseover="showTip(event, 'fs10', 80)" class="t">int</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 81)" onmouseover="showTip(event, 'fs10', 81)" class="t">int</span>) ) ( <span onmouseout="hideTip(event, 'fs41', 82)" onmouseover="showTip(event, 'fs41', 82)" class="i">x</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 83)" onmouseover="showTip(event, 'fs10', 83)" class="t">int</span> ) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs40', 84)" onmouseover="showTip(event, 'fs40', 84)" class="f">f</span> <span onmouseout="hideTip(event, 'fs41', 85)" onmouseover="showTip(event, 'fs41', 85)" class="i">x</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs42', 86)" onmouseover="showTip(event, 'fs42', 86)" class="f">someFunction</span> <span onmouseout="hideTip(event, 'fs43', 87)" onmouseover="showTip(event, 'fs43', 87)" class="i">number</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 88)" onmouseover="showTip(event, 'fs37', 88)" class="f">timesTwo</span> <span onmouseout="hideTip(event, 'fs43', 89)" onmouseover="showTip(event, 'fs43', 89)" class="i">number</span> <span class="o">+</span> <span class="n">5</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs44', 90)" onmouseover="showTip(event, 'fs44', 90)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 91)" onmouseover="showTip(event, 'fs39', 91)" class="f">applyFunction</span> <span onmouseout="hideTip(event, 'fs42', 92)" onmouseover="showTip(event, 'fs42', 92)" class="f">someFunction</span> <span class="n">18</span>
    
    <span class="c">// The &quot;pipe&quot; operator in F#. It takes something and applies it as the last argument of a function.</span>
    <span class="k">let</span> (<span class="o">|&gt;</span>) <span onmouseout="hideTip(event, 'fs45', 93)" onmouseover="showTip(event, 'fs45', 93)" class="i">x</span> <span onmouseout="hideTip(event, 'fs46', 94)" onmouseover="showTip(event, 'fs46', 94)" class="f">f</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs46', 95)" onmouseover="showTip(event, 'fs46', 95)" class="f">f</span> <span onmouseout="hideTip(event, 'fs45', 96)" onmouseover="showTip(event, 'fs45', 96)" class="i">x</span>

    <span class="c">// Identical result, but the pipe operator makes it naturally readable. &quot;I take 18 and apply a function someFunction.&quot;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 97)" onmouseover="showTip(event, 'fs47', 97)" class="i">tluser</span> <span class="o">=</span> <span class="n">18</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs39', 98)" onmouseover="showTip(event, 'fs39', 98)" class="f">applyFunction</span> <span onmouseout="hideTip(event, 'fs42', 99)" onmouseover="showTip(event, 'fs42', 99)" class="f">someFunction</span>
</code></pre></td>
</tr>
</table>

<p>In C#, function arguments are
always tupled implicitly, that means the arguments can only exist together at the same time. 
Although curried functions can be <a href="http://mikehadlow.blogspot.co.at/2008/03/currying-in-c-with-oliver-sturm.html">written explicitly in C#</a>, partial applications require additional programming effort. 
A Tuple is noted like this (F# has syntactic sugar for working with tuples):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 100)" onmouseover="showTip(event, 'fs48', 100)" class="i">tuple</span> <span class="o">=</span> (<span class="n">1</span>,<span class="n">2</span>,<span class="n">3</span>,<span class="n">4</span>)
</code></pre></td>
</tr>
</table>

<h3><a name="Lists-and-Types" class="anchor" href="#Lists-and-Types">Lists and Types</a></h3>

<p>Tuples are base F# types. They are very often used to quickly group some variables together. However, too large tuples can become confusing.
Let's look at other ways to define types:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
<span class="l">38: </span>
<span class="l">39: </span>
<span class="l">40: </span>
<span class="l">41: </span>
<span class="l">42: </span>
<span class="l">43: </span>
<span class="l">44: </span>
<span class="l">45: </span>
<span class="l">46: </span>
<span class="l">47: </span>
<span class="l">48: </span>
<span class="l">49: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="c">// Record Type. Every field is read-only.</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs49', 101)" onmouseover="showTip(event, 'fs49', 101)" class="t">Record</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span><span class="o">&gt;</span> <span class="o">=</span>   <span class="c">//&lt;- generics</span>
        {
            <span onmouseout="hideTip(event, 'fs50', 102)" onmouseover="showTip(event, 'fs50', 102)" class="i">Somefield</span> <span class="o">:</span> <span class="o">&#39;</span><span class="i">a</span>
            <span onmouseout="hideTip(event, 'fs51', 103)" onmouseover="showTip(event, 'fs51', 103)" class="i">Otherfield</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs52', 104)" onmouseover="showTip(event, 'fs52', 104)" class="t">string</span>
            <span onmouseout="hideTip(event, 'fs53', 105)" onmouseover="showTip(event, 'fs53', 105)" class="i">Evenmore</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs54', 106)" onmouseover="showTip(event, 'fs54', 106)" class="t">float</span> <span class="o">*</span> <span class="i">C4b</span>
        }

    <span class="c">// Creating a new Record</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 107)" onmouseover="showTip(event, 'fs55', 107)" class="i">myRecord</span> <span class="o">=</span> {    <span class="c">//&lt;- generics automatically inferred</span>
                <span class="i">Somefield</span> <span class="o">=</span> <span class="n">1</span>
                <span class="i">Otherfield</span> <span class="o">=</span> <span class="s">&quot;hello&quot;</span>
                <span class="i">Evenmore</span> <span class="o">=</span> (<span class="n">3.14</span>, <span class="i">C4b</span><span class="o">.</span><span class="i">Blue</span>)
            }

    <span class="c">// Copying a record</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 108)" onmouseover="showTip(event, 'fs56', 108)" class="i">secondRecord</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs55', 109)" onmouseover="showTip(event, 'fs55', 109)" class="i">myRecord</span> <span class="k">with</span> <span class="i">Somefield</span> <span class="o">=</span> <span class="n">123</span> }


    <span class="c">// Discriminated Union. A variable is either one of the type&#39;s cases. </span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs57', 110)" onmouseover="showTip(event, 'fs57', 110)" class="t">EitherOr</span> <span class="o">=</span>
        | <span onmouseout="hideTip(event, 'fs58', 111)" onmouseover="showTip(event, 'fs58', 111)" class="p">Nothing</span>                   <span class="c">//this case has no arguments</span>
        | <span onmouseout="hideTip(event, 'fs59', 112)" onmouseover="showTip(event, 'fs59', 112)" class="p">Something</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs10', 113)" onmouseover="showTip(event, 'fs10', 113)" class="t">int</span>          <span class="c">//this case has some arguments</span>
        | <span onmouseout="hideTip(event, 'fs60', 114)" onmouseover="showTip(event, 'fs60', 114)" class="p">TwoThings</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs10', 115)" onmouseover="showTip(event, 'fs10', 115)" class="t">int</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs10', 116)" onmouseover="showTip(event, 'fs10', 116)" class="t">int</span>

    <span class="c">// Creating a union case.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 117)" onmouseover="showTip(event, 'fs61', 117)" class="i">tryMe</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs60', 118)" onmouseover="showTip(event, 'fs60', 118)" class="p">TwoThings</span> (<span class="n">6</span>,<span class="n">7</span>)

    <span class="c">// A union can only be &quot;unpacked&quot; using the match ... with statement.</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 119)" onmouseover="showTip(event, 'fs62', 119)" class="i">triedYou</span> <span class="o">=</span> 
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs61', 120)" onmouseover="showTip(event, 'fs61', 120)" class="i">tryMe</span> <span class="k">with</span>        <span class="c">//all cases must be handled.</span>
        | <span onmouseout="hideTip(event, 'fs58', 121)" onmouseover="showTip(event, 'fs58', 121)" class="p">Nothing</span> <span class="k">-&gt;</span> <span class="n">0</span>
        | <span onmouseout="hideTip(event, 'fs59', 122)" onmouseover="showTip(event, 'fs59', 122)" class="p">Something</span> <span onmouseout="hideTip(event, 'fs41', 123)" onmouseover="showTip(event, 'fs41', 123)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 124)" onmouseover="showTip(event, 'fs41', 124)" class="i">x</span>
        | <span onmouseout="hideTip(event, 'fs60', 125)" onmouseover="showTip(event, 'fs60', 125)" class="p">TwoThings</span> (<span onmouseout="hideTip(event, 'fs41', 126)" onmouseover="showTip(event, 'fs41', 126)" class="i">x</span>,<span onmouseout="hideTip(event, 'fs63', 127)" onmouseover="showTip(event, 'fs63', 127)" class="i">y</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 128)" onmouseover="showTip(event, 'fs41', 128)" class="i">x</span><span class="o">+</span><span onmouseout="hideTip(event, 'fs63', 129)" onmouseover="showTip(event, 'fs63', 129)" class="i">y</span>


    <span class="c">// Classical class</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs64', 130)" onmouseover="showTip(event, 'fs64', 130)" class="t">Awesome</span>( <span onmouseout="hideTip(event, 'fs65', 131)" onmouseover="showTip(event, 'fs65', 131)" class="i">name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs52', 132)" onmouseover="showTip(event, 'fs52', 132)" class="t">string</span>, <span onmouseout="hideTip(event, 'fs66', 133)" onmouseover="showTip(event, 'fs66', 133)" class="i">value</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 134)" onmouseover="showTip(event, 'fs10', 134)" class="t">int</span>) <span class="o">=</span>  <span class="c">//constructor</span>
        <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs67', 135)" onmouseover="showTip(event, 'fs67', 135)" class="v">name</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs67', 136)" onmouseover="showTip(event, 'fs67', 136)" class="i">name</span>                  <span class="c">//constructor body</span>

        <span class="k">with</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs68', 137)" onmouseover="showTip(event, 'fs68', 137)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs69', 138)" onmouseover="showTip(event, 'fs69', 138)" class="i">Value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 139)" onmouseover="showTip(event, 'fs66', 139)" class="i">value</span>              <span class="c">//read-only member</span>
             <span class="k">member</span> <span onmouseout="hideTip(event, 'fs68', 140)" onmouseover="showTip(event, 'fs68', 140)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 141)" onmouseover="showTip(event, 'fs70', 141)" class="i">Name</span>                       <span class="c">//read/write member</span>
                <span class="k">with</span> <span class="k">public</span> <span class="i">get</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs67', 142)" onmouseover="showTip(event, 'fs67', 142)" class="v">name</span>         <span class="c">//getters and setters</span>
                <span class="k">and</span> <span class="k">private</span> <span onmouseout="hideTip(event, 'fs71', 143)" onmouseover="showTip(event, 'fs71', 143)" class="i">set</span>(<span onmouseout="hideTip(event, 'fs72', 144)" onmouseover="showTip(event, 'fs72', 144)" class="i">v</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs67', 145)" onmouseover="showTip(event, 'fs67', 145)" class="v">name</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs72', 146)" onmouseover="showTip(event, 'fs72', 146)" class="i">v</span>   

    <span class="c">// type extension.</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs64', 147)" onmouseover="showTip(event, 'fs64', 147)" class="t">Awesome</span> <span class="k">with</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs68', 148)" onmouseover="showTip(event, 'fs68', 148)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 149)" onmouseover="showTip(event, 'fs73', 149)" class="f">DoSomething</span>() <span class="o">=</span> <span onmouseout="hideTip(event, 'fs74', 150)" onmouseover="showTip(event, 'fs74', 150)" class="f">printfn</span> <span class="s">&quot;I&#39;m here&quot;</span>
 
</code></pre></td>
</tr>
</table>

<p>The functional style prefers records and unions, the "read-only" types. However, especially when using stuff written in C#, "regular" classes are
also an important tool of the trade.</p>

<p>The type system of F# is very powerful and it encourages modelling problems using a complete, coherent <a href="https://fsharpforfunandprofit.com/ddd/">type system and collections of mapping functions</a>.
One important example for this are F# lists. F# lists represent immutable collections of values. Since everything is immutable, it makes little sense
to iterate over list elements with loops. Instead, lists are usually traversed using recursive functions. The F# <code>List</code> module contains implementations
for the common formal list operators, including <code>List.map</code>, <code>List.filter</code> and <code>List.fold</code>. Comprehensive descriptions of F# lists can be found in many places,
<a href="http://www.tutorialspoint.com/fsharp/fsharp_lists.htm">for example here</a>. Instead, let's look at different ways to create lists:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="c">// three times the identical list</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 151)" onmouseover="showTip(event, 'fs75', 151)" class="i">list1</span> <span class="o">=</span> [ <span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>; <span class="n">4</span>; <span class="n">5</span>; <span class="n">6</span> ]
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs76', 152)" onmouseover="showTip(event, 'fs76', 152)" class="i">list2</span> <span class="o">=</span>
        [
            <span class="n">1</span>
            <span class="n">2</span>
            <span class="n">3</span>
            <span class="n">4</span>
            <span class="n">5</span>
            <span class="n">6</span>
        ]
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 153)" onmouseover="showTip(event, 'fs77', 153)" class="i">b</span> <span class="o">=</span> <span class="n">5</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 154)" onmouseover="showTip(event, 'fs78', 154)" class="i">list3</span> <span class="o">=</span>
        [
            <span class="k">yield</span> <span class="n">1</span>
            <span class="k">yield</span> <span class="n">2</span>
            <span class="k">yield</span> <span class="n">3</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 155)" onmouseover="showTip(event, 'fs35', 155)" class="i">a</span> <span class="o">=</span> <span class="n">4</span>
            <span class="k">yield!</span> [ <span onmouseout="hideTip(event, 'fs35', 156)" onmouseover="showTip(event, 'fs35', 156)" class="i">a</span>; <span onmouseout="hideTip(event, 'fs77', 157)" onmouseover="showTip(event, 'fs77', 157)" class="i">b</span>; <span class="n">6</span> ]
        ]
</code></pre></td>
</tr>
</table>

<p>You can simply enumerate the elements between brackets, like <code>[a;b;c]</code>, to create a list. However, that is convenient syntactic sugar by F#. In actuality,
the brackets create a special context called a <em>computation expression</em>. Within the list builder computation expression, the <code>yield</code> keyword appends
an element to the list. The <code>yield!</code> (read: "yield many") keyword unpacks another list and adds all elements to the current list in sequence. The final result
of the list builder is a list. A computation expression may contain any other code.</p>

<p>Computation expressions implement the formal concept of monads. They are a very powerful tool for modelling data flow and data relations in a clearly defined, 
modular and composable manner. In this case, there are two important properties. Computation expressions allow us to define <em>contexts</em>, within which certain 
keywords can have differently defined semantics, allowing us to create our own language extensions for different significances. Secondly, computation
expressions <em>isolate</em> side-effects in a clearly stated fashion, guaranteeing that no change will affect any other parts than those it's supposed to.</p>

<p>You can define your own computation expressions. A description how <a href="https://msdn.microsoft.com/en-us/library/dd233182.aspx">can be found here</a>.</p>

<h2><a name="Incremental-evaluation-The-Mod-System" class="anchor" href="#Incremental-evaluation-The-Mod-System">Incremental evaluation - <em>The Mod System</em></a></h2>

<p>The Mod system is a framework for incremental evaluation and adaptive computation. It can be found in <code>Aardvark.Base.Incremental</code> and is the staple
for many applications within the Aardvark libraries. The incremental evaluation property means that, when using the Mod system, computations
are only conducted when necessary. When one parameter changes, only the parts affected by that parameter are re-computed. Adaptive computation
means that a result is only computed when it is actually being requested. A mod by itself won't actually do anything unless someone else "pulls" a result
out of it. Both of these are highly desirable properties, especially in applications with real-time interactivity and some form of visualization and 
user interface. A robust and complete dependency tracking system and solutions to many formal hurdles are required to achieve these goals. Luckily,
the Mod system implements them and provides us with a clean declarative interface using types and computation expressions.</p>

<p>Let's look at some mods:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">open</span> <span class="i">Aardvark</span><span class="o">.</span><span class="i">Base</span><span class="o">.</span><span class="i">Incremental</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs79', 158)" onmouseover="showTip(event, 'fs79', 158)" class="i">theSame</span> <span class="o">=</span> <span class="i">Mod</span><span class="o">.</span><span class="i">constant</span> <span class="n">3</span>        <span class="c">//Mod.constant creates an IMod that remains the same</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 159)" onmouseover="showTip(event, 'fs80', 159)" class="i">changing</span> <span class="o">=</span> <span class="i">Mod</span><span class="o">.</span><span class="i">init</span> <span class="n">0</span>           <span class="c">//Mod.init creates a ModRef. A ModRef is a mutable cell. It can be assigned at will.</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 160)" onmouseover="showTip(event, 'fs81', 160)" class="i">complex</span> <span class="o">=</span>
        <span class="i">adaptive</span> {                      <span class="c">//the computation expression to create an IMod.</span>
            <span class="k">let!</span> <span class="i">first</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs79', 161)" onmouseover="showTip(event, 'fs79', 161)" class="i">theSame</span>        <span class="c">//let! binds another mod as a dependency for this mod. It also &quot;unpacks&quot; the value so we can work with it.</span>
            <span class="k">let!</span> <span class="i">second</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 162)" onmouseover="showTip(event, 'fs80', 162)" class="i">changing</span>
            <span class="k">let</span> <span class="i">third</span> <span class="o">=</span> <span class="n">8</span>
            <span class="k">return</span> <span class="i">first</span> <span class="o">+</span> <span class="i">second</span> <span class="o">+</span> <span class="i">third</span>
        }

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs82', 163)" onmouseover="showTip(event, 'fs82', 163)" class="i">currentResult</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs81', 164)" onmouseover="showTip(event, 'fs81', 164)" class="i">complex</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">force</span><span class="c">//Mod.force retrieves the value of a mod at this current time.</span>
    <span onmouseout="hideTip(event, 'fs74', 165)" onmouseover="showTip(event, 'fs74', 165)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs82', 166)" onmouseover="showTip(event, 'fs82', 166)" class="i">currentResult</span>          <span class="c">//currentResult is 11</span>

    <span class="i">transact</span> ( <span class="k">fun</span> () <span class="k">-&gt;</span> <span class="n">4</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">change</span> <span onmouseout="hideTip(event, 'fs80', 167)" onmouseover="showTip(event, 'fs80', 167)" class="i">changing</span> )    <span class="c">//assign a ModRef using Mod.change within the transact function</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs83', 168)" onmouseover="showTip(event, 'fs83', 168)" class="i">newResult</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs81', 169)" onmouseover="showTip(event, 'fs81', 169)" class="i">complex</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">force</span><span class="c">//the value of complex is only re-computed when we call Mod.force</span>
    <span onmouseout="hideTip(event, 'fs74', 170)" onmouseover="showTip(event, 'fs74', 170)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs82', 171)" onmouseover="showTip(event, 'fs82', 171)" class="i">currentResult</span>          <span class="c">//newResult is 15</span>
</code></pre></td>
</tr>
</table>

<p>There exist well established patterns for formulating self-adjusting values like this. Most of them build on the concept of events and callback
functions that trigger when these events occur. The callback functions affect other variables, which may have callbacks of their own, creating
a chain of callbacks that keeps the program state in sync. However, since those callbacks are by definition mutating,
the side effects of such mutations very quickly grow in complexity and eventually get completely out of control, landing you in <a href="http://callbackhell.com/">callback hell</a>.</p>

<p>The Mod system allows us to define our program in terms of <em>dependencies</em>. Values change whenever one of their dependencies change. The approach is similar to 
reactive programming frameworks such as Microsoft's Reactive Extensions (Rx) which is based on
the observer pattern. In order to prevent complexity problems, Rx provides a rich set of combinators for composing observables without the need to write callbacks manually.
Similarly to Rx combinators, the Mod system allows us to write code the functional way, isolating side effects to specific contexts! 
This "hides" the actual callback logic from the programmer and allows us to work with the actual mapping functions, avoiding callback hell.
Crucially, and in contrast to Rx, the mod system tracks dependencies explicitly and only evaluates as much as needed in a lazy manner.</p>

<p>Parallel to the IMods are the asets, adaptive sets, representing set semantics:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs84', 172)" onmouseover="showTip(event, 'fs84', 172)" class="i">bikes</span> <span class="o">:</span> <span class="i">cset</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs10', 173)" onmouseover="showTip(event, 'fs10', 173)" class="i">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="i">CSet</span><span class="o">.</span><span class="i">empty</span>      <span class="c">//cset is a changable set with add and remove operators. Analogous to ModRef</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 174)" onmouseover="showTip(event, 'fs85', 174)" class="i">skates</span> <span class="o">=</span> [<span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>] <span class="o">|&gt;</span> <span class="i">ASet</span><span class="o">.</span><span class="i">ofList</span>   <span class="c">//ASet.ofList makes a constant aset of a list. Analogous to Mod.constant</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs86', 175)" onmouseover="showTip(event, 'fs86', 175)" class="i">transport</span> <span class="o">=</span>
        <span class="i">aset</span> {                              <span class="c">//the aset computation expression builder</span>
            <span class="k">for</span> <span class="i">thing</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs84', 176)" onmouseover="showTip(event, 'fs84', 176)" class="i">bikes</span> <span class="o">:&gt;</span> <span class="i">aset</span><span class="o">&lt;</span>_<span class="o">&gt;</span> <span class="k">do</span><span class="c">//for...do binds another aset as a dependency for this aset and transforms the elements</span>
                <span class="k">yield</span> <span class="i">thing</span>                 <span class="c">//yield adds one element to this aset</span>
            <span class="k">yield!</span> <span onmouseout="hideTip(event, 'fs85', 177)" onmouseover="showTip(event, 'fs85', 177)" class="i">skates</span>                   <span class="c">//yield! binds another aset and yields all its elements</span>
        }

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs87', 178)" onmouseover="showTip(event, 'fs87', 178)" class="i">output1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs86', 179)" onmouseover="showTip(event, 'fs86', 179)" class="i">transport</span> <span class="o">|&gt;</span> <span class="i">ASet</span><span class="o">.</span><span class="i">toList</span>  <span class="c">//ASet.toList gets the value set at this current time. Analogous to Mod.force</span>
    <span onmouseout="hideTip(event, 'fs74', 180)" onmouseover="showTip(event, 'fs74', 180)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs87', 181)" onmouseover="showTip(event, 'fs87', 181)" class="i">output1</span>    <span class="c">//ouput1 is [1;2;3]</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs88', 182)" onmouseover="showTip(event, 'fs88', 182)" class="i">success</span> <span class="o">=</span> <span class="i">transact</span> ( <span class="k">fun</span> () <span class="k">-&gt;</span> <span class="i">CSet</span><span class="o">.</span><span class="i">add</span> <span class="n">0</span> <span onmouseout="hideTip(event, 'fs84', 183)" onmouseover="showTip(event, 'fs84', 183)" class="i">bikes</span> )   <span class="c">//add a new element to a cset using CSet.add within the transact function</span>
    
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs89', 184)" onmouseover="showTip(event, 'fs89', 184)" class="i">output2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs86', 185)" onmouseover="showTip(event, 'fs86', 185)" class="i">transport</span> <span class="o">|&gt;</span> <span class="i">ASet</span><span class="o">.</span><span class="i">toList</span>
    <span onmouseout="hideTip(event, 'fs74', 186)" onmouseover="showTip(event, 'fs74', 186)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs89', 187)" onmouseover="showTip(event, 'fs89', 187)" class="i">output2</span>    <span class="c">//output2 is [0;1;2;3]</span>
</code></pre></td>
</tr>
</table>

<p><code>aset</code>s also support <code>ASet.map</code>, <code>ASet.filter</code> and <code>ASet.fold</code>, among others.</p>

<p>The Mod system is used extensively in Aardvark and has proven itself useful in many real-world applications. 
The Fractal Terrain Generator project shows how to bind mods to Ui controls and how to make mods into 3D rendered images.</p>

<h2><a name="Scene-Graph-and-Shaders" class="anchor" href="#Scene-Graph-and-Shaders">Scene Graph and Shaders</a></h2>

<p>The <code>ISg</code> SceneGraph system found in <code>Aardvark.SceneGraph</code> is one application of the Mod system for an incremental evaluation workflow. The
entire scene graph structure works with incrementality in mind, down to the actual draw calls, which are only dispatched if the scene has 
actually changed (lazy rendering). The scene graph represents all values and attributes needed for rendering, organized into the established
graph structure, and translates into OpenGL draw calls.</p>

<p>A simple scene graph could look like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">open</span> <span class="i">Aardvark</span><span class="o">.</span><span class="i">SceneGraph</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 188)" onmouseover="showTip(event, 'fs90', 188)" class="f">coolISg</span> ( <span onmouseout="hideTip(event, 'fs91', 189)" onmouseover="showTip(event, 'fs91', 189)" class="i">vt</span> <span class="o">:</span> <span class="i">IMod</span><span class="o">&lt;</span><span class="i">Trafo3d</span><span class="o">&gt;</span> ) ( <span onmouseout="hideTip(event, 'fs92', 190)" onmouseover="showTip(event, 'fs92', 190)" class="i">pt</span> <span class="o">:</span> <span class="i">IMod</span><span class="o">&lt;</span><span class="i">Trafo3d</span><span class="o">&gt;</span> ) ( <span onmouseout="hideTip(event, 'fs93', 191)" onmouseover="showTip(event, 'fs93', 191)" class="i">ig</span> <span class="o">:</span> <span class="i">IndexedGeometry</span> ) <span class="o">=</span> 

        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 192)" onmouseover="showTip(event, 'fs94', 192)" class="i">smallISg</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs93', 193)" onmouseover="showTip(event, 'fs93', 193)" class="i">ig</span>  <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">ofIndexedGeometry</span>
                <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">trafo</span> (<span class="i">Mod</span><span class="o">.</span><span class="i">constant</span> (<span class="i">Trafo3d</span><span class="o">.</span><span class="i">Scale</span> (<span class="i">V3d</span>(<span class="n">1.0</span>,<span class="n">1.0</span>,<span class="n">0.5</span>))))
        
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs95', 194)" onmouseover="showTip(event, 'fs95', 194)" class="i">largeISg</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs93', 195)" onmouseover="showTip(event, 'fs93', 195)" class="i">ig</span> <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">ofIndexedGeometry</span>
               <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">trafo</span> (<span class="i">Mod</span><span class="o">.</span><span class="i">constant</span> (<span class="i">Trafo3d</span><span class="o">.</span><span class="i">Scale</span> (<span class="i">V3d</span>(<span class="n">1.0</span>,<span class="n">1.0</span>,<span class="n">2.0</span>))))

        [<span onmouseout="hideTip(event, 'fs94', 196)" onmouseover="showTip(event, 'fs94', 196)" class="i">smallISg</span>; <span onmouseout="hideTip(event, 'fs95', 197)" onmouseover="showTip(event, 'fs95', 197)" class="i">largeISg</span>]
            <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">group&#39;</span>
            <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">effect</span> [  <span class="i">DefaultSurfaces</span><span class="o">.</span><span class="i">trafo</span>           <span class="o">|&gt;</span> <span class="i">toEffect</span> 
                            <span class="i">DefaultSurfaces</span><span class="o">.</span><span class="i">vertexColor</span>     <span class="o">|&gt;</span> <span class="i">toEffect</span> 
                            <span class="i">DefaultSurfaces</span><span class="o">.</span><span class="i">simpleLighting</span>  <span class="o">|&gt;</span> <span class="i">toEffect</span>]
            <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">viewTrafo</span> <span onmouseout="hideTip(event, 'fs91', 198)" onmouseover="showTip(event, 'fs91', 198)" class="i">vt</span>
            <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">projTrafo</span> <span onmouseout="hideTip(event, 'fs92', 199)" onmouseover="showTip(event, 'fs92', 199)" class="i">pt</span>
</code></pre></td>
</tr>
</table>

<p>The ISg is written in the functional composable style using the pipe <code>|&gt;</code> operator. It is built from the bottom-up, starting at an <code>IndexedGeometry</code>,
which is a very simple wrapper type holding geometry information (positions, normals, colors, indices, ...). Attributes are added to scene graph nodes
by creating a new specialized node that has the old node as a child. Several nodes can be consolidated into one (adaptive!) set. This is done repeatedly
until all desired attributes are defined.</p>

<p>All of the scene graph attributes are IMods. The ISg is kept up-to-date if any of them change. Some important scene graph attributes are:</p>

<ul>
<li><code>Sg.viewTrafo</code> and <code>Sg.projTrafo</code> sets the OpenGL view and projection trafos</li>
<li><code>Sg.trafo</code> applies any trafo to the child elements</li>
<li><code>Sg.group</code> and <code>Sg.set</code> (adaptively) group many nodes together</li>
<li><code>Sg.effect</code> applies a shader surface to child elements</li>
<li><code>Sg.uniform</code> sets the value of a shader uniform</li>
<li><code>Sg.pass</code> defines the order for multi-pass rendering</li>
<li><code>Sg.blendMode</code> sets blending behavior</li>
<li><code>Sg.cullMode</code> sets culling behavior</li>
<li><code>Sg.diffuseTexture</code> and <code>Sg.diffuseFileTexture</code> set textures</li>
<li><code>Sg.onOff</code> enables or disables this branch of the scene graph</li>
</ul>

<p>The ISg is compiled and displayed in a IRenderControl like:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 200)" onmouseover="showTip(event, 'fs96', 200)" class="f">compiled</span> ( <span onmouseout="hideTip(event, 'fs97', 201)" onmouseover="showTip(event, 'fs97', 201)" class="i">isg</span> <span class="o">:</span> <span class="i">ISg</span> ) ( <span onmouseout="hideTip(event, 'fs98', 202)" onmouseover="showTip(event, 'fs98', 202)" class="i">app</span> <span class="o">:</span> <span class="i">Aardvark</span><span class="o">.</span><span class="i">Application</span><span class="o">.</span><span class="i">WinForms</span><span class="o">.</span><span class="i">OpenGlApplication</span> ) ( <span onmouseout="hideTip(event, 'fs99', 203)" onmouseover="showTip(event, 'fs99', 203)" class="i">rc</span> <span class="o">:</span> <span class="i">Aardvark</span><span class="o">.</span><span class="i">Application</span><span class="o">.</span><span class="i">IRenderControl</span> ) <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs100', 204)" onmouseover="showTip(event, 'fs100', 204)" class="i">task</span> <span class="o">=</span> <span class="i">Sg</span><span class="o">.</span><span class="i">compile</span> <span onmouseout="hideTip(event, 'fs98', 205)" onmouseover="showTip(event, 'fs98', 205)" class="i">app</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs101', 206)" onmouseover="showTip(event, 'fs101', 206)" class="i">Runtime</span> <span onmouseout="hideTip(event, 'fs99', 207)" onmouseover="showTip(event, 'fs99', 207)" class="i">rc</span><span class="o">.</span><span class="i">FramebufferSignature</span> <span onmouseout="hideTip(event, 'fs97', 208)" onmouseover="showTip(event, 'fs97', 208)" class="i">isg</span>
        <span onmouseout="hideTip(event, 'fs99', 209)" onmouseover="showTip(event, 'fs99', 209)" class="i">rc</span><span class="o">.</span><span class="i">RenderTask</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs100', 210)" onmouseover="showTip(event, 'fs100', 210)" class="i">task</span>
</code></pre></td>
</tr>
</table>

<p>The IRenderControl can now be set the child of any WinForms or WPF control to display the rendered result.</p>

<p>The shaders are built using FShade. FShade is a framework for writing composable shaders in F#. That means that shader computations can be written in 
several passes and combined at will, and the FShade compiler will translate the code into an actual GLSL program. FShade uses computation expressions
to encapsule semantics and integrates with the Mod system. There are three computation expressions for the three shader stages:</p>

<ul>
<li><code>vertex</code> for the vertex stage</li>
<li><code>triangle</code> for the geometry stage</li>
<li><code>fragment</code> for the fragment stage</li>
</ul>

<p>Aardvark provides some often-used basic shaders, such as <code>DefaultSurfaces.trafo</code>, <code>DefaultSurfaces.vertexColor</code> and <code>DefaultSurfaces.simpleLighting</code>. An
implementation of a custom shader could look like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">open</span> <span class="i">FShade</span>
    <span class="k">open</span> <span class="i">Aardvark</span><span class="o">.</span><span class="i">SceneGraph</span><span class="o">.</span><span class="i">DefaultSurfaces</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs102', 211)" onmouseover="showTip(event, 'fs102', 211)" class="f">colorRed</span> ( <span onmouseout="hideTip(event, 'fs103', 212)" onmouseover="showTip(event, 'fs103', 212)" class="i">red</span> <span class="o">:</span> <span class="i">IMod</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs104', 213)" onmouseover="showTip(event, 'fs104', 213)" class="i">bool</span><span class="o">&gt;</span> ) ( <span onmouseout="hideTip(event, 'fs105', 214)" onmouseover="showTip(event, 'fs105', 214)" class="i">v</span> <span class="o">:</span> <span class="i">Vertex</span> ) <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs106', 215)" onmouseover="showTip(event, 'fs106', 215)" class="i">redColor</span> <span class="o">=</span> <span class="i">C4b</span>(<span class="n">255</span>,<span class="n">10</span>,<span class="n">10</span>)<span class="o">.</span><span class="i">ToC4f</span>()<span class="o">.</span><span class="i">ToV4d</span>()       <span class="c">//closure is taken into shader</span>
        <span class="i">fragment</span> {
            <span class="k">let</span> <span class="i">enabled</span> <span class="o">=</span> <span class="o">!!</span><span onmouseout="hideTip(event, 'fs103', 216)" onmouseover="showTip(event, 'fs103', 216)" class="i">red</span>        <span class="c">//a mod bound within shader</span>
            <span class="k">if</span> <span class="i">enabled</span> <span class="k">then</span>
                 <span class="k">return</span> <span onmouseout="hideTip(event, 'fs106', 217)" onmouseover="showTip(event, 'fs106', 217)" class="i">redColor</span>
            <span class="k">else</span>
                <span class="k">return</span> <span onmouseout="hideTip(event, 'fs105', 218)" onmouseover="showTip(event, 'fs105', 218)" class="i">v</span><span class="o">.</span><span class="i">c</span>
            }
</code></pre></td>
</tr>
</table>

<p>An ordered list of shaders is created using the <code>toEffect</code> function and then added to the scene graph for compilation. After compilation,
the instructions are translated to GLSL constructs, and mods are treated as uniforms. Note that, though the program might run, shader
compilation may fail if the code violates standing GLSL rules. Feel free to check the source of Aardvark.Rendering for more great shader
examples.</p>

<h2><a name="Building-an-app" class="anchor" href="#Building-an-app">Building an app</a></h2>

<p>Using the previously presented techniques and libraries, I implemented the Fractal Terrain Generator app as a practical application. Because
of the combination of many different programming paradigms and software constructs, I ran into some peculiarities I had to solve. I want to 
document my observations here as well as in the extensive comments in the source code.</p>

<h3><a name="An-impure-algorithm" class="anchor" href="#An-impure-algorithm">An impure algorithm</a></h3>

<p>The midpoint displacement algorithm used to generate the fractal terrain by itself is impure. Pure functions always return the same result every call
with the same parameters. This, however, is not the case here because of the random number generator. If the user clicks the button to generate a new terrain,
they expect a randomly different result despite the same parameters. The Mod system can not consistently detect a change if mutation is involved, you can not
<em>force</em> it to re-compute by some punctual event like a button click. What I did to solve this problem was to make the button transact two changes, a
<em>dummy-change</em> containing a garbage value and then the actual change (where the value stayed the same). This way, the Mod system detects a change and readies
itself to re-compute, although the transactions happen too fast for the garbage value to be ever actually evaluated.</p>

<p>This was an ad-hoc solution. The correct solution would have been to include timestamps with each parameter value. This way, even though the parameters would
stay the same each button click, the timestamps would be updated to the current time, forcing a re-evaluation of the algorithm. This concept of 
modelling reactive values as signals over time and connecting components with this constraint in mind is called <em>Functional Reactive Programming</em> and 
has <a href="https://wiki.haskell.org/Yampa">already been extensively explored</a>.</p>

<h3><a name="Functional-Data-Structures" class="anchor" href="#Functional-Data-Structures">Functional Data Structures</a></h3>

<p>When translating my generated terrain tree into renderable vertex positions and normals, I tried to stick with pure F# data structures at first. Since
the tree is a recursive data structure, it needs a recursive function to traverse it and collect the vertex attributes along the way. The F# way to write 
this would be a recursive function that contains a list builder and calls itself in the <code>yield!</code> statement within the list builder. It keeps calling itself
until the end of the tree is reached and the list is empty, at which point each item is added to the list of its parent. Obviously, this creates a massive
series of list builder continuations, each of which immediately try to evaluate the continuation of its successor. At a depth of 10 iterations, this construct
became so expensive that it wouldn't fit into my computer's memory. Afterwards, I exchanged the F# lists for simple C# generic lists, passing the list 
along with each recursion step and adding the elements by mutation. In the case of this many additions, this approach is much cheaper than the previous
one and 10 iterations can be handled easily.</p>

<p>There are many approaches to functional lists that handle various cases better. For example, I could try to model the vertex attribute collection
with list concatenations and define a complete list as the sum of such. Also imaginable would be the continuation list, where the list additions are 
collected only as functions, which are then applied all together in a flat manner.</p>

<h3><a name="Using-XAML" class="anchor" href="#Using-XAML">Using XAML</a></h3>

<p>Instead of building the UI programmatically, which has its merits but can become cumbersome, I decided to try using the XAML designer in Visual Studio to 
create my UI and connect it with the mod system afterwards. This is far from trivial for more complex WPF controls, such as treeviews or listviews, but 
can be done quite efficiently for very simple cases. The F# project is the startup project for the solution. The C# project containing the XAML window 
is referenced by the F# project. When the main project starts, it launches the XAML project and shows the window. The window class exposes all controls
relevant to the app (by name), and the app connects those controls like so:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="c">// the value of a WPF control is written into a mod</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs107', 219)" onmouseover="showTip(event, 'fs107', 219)" class="f">modSlider</span> (<span onmouseout="hideTip(event, 'fs108', 220)" onmouseover="showTip(event, 'fs108', 220)" class="i">slider</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs2', 221)" onmouseover="showTip(event, 'fs2', 221)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs109', 222)" onmouseover="showTip(event, 'fs109', 222)" class="i">Windows</span><span class="o">.</span><span class="i">Controls</span><span class="o">.</span><span class="i">Slider</span>) <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs110', 223)" onmouseover="showTip(event, 'fs110', 223)" class="i">res</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs54', 224)" onmouseover="showTip(event, 'fs54', 224)" class="f">float</span> <span onmouseout="hideTip(event, 'fs108', 225)" onmouseover="showTip(event, 'fs108', 225)" class="i">slider</span><span class="o">.</span><span class="i">Value</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">init</span>
        <span onmouseout="hideTip(event, 'fs108', 226)" onmouseover="showTip(event, 'fs108', 226)" class="i">slider</span><span class="o">.</span><span class="i">ValueChanged</span><span class="o">.</span><span class="i">Add</span> ( <span class="k">fun</span> <span class="i">v</span> <span class="k">-&gt;</span> <span class="i">transact</span> ( <span class="k">fun</span> _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs54', 227)" onmouseover="showTip(event, 'fs54', 227)" class="i">float</span> <span class="i">v</span><span class="o">.</span><span class="i">NewValue</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">change</span> <span onmouseout="hideTip(event, 'fs110', 228)" onmouseover="showTip(event, 'fs110', 228)" class="i">res</span> ) )
        <span onmouseout="hideTip(event, 'fs110', 229)" onmouseover="showTip(event, 'fs110', 229)" class="i">res</span> <span class="o">:&gt;</span> <span class="i">IMod</span><span class="o">&lt;</span>_<span class="o">&gt;</span>

    <span class="c">// the value of a mod is displayed in a WPF control</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs111', 230)" onmouseover="showTip(event, 'fs111', 230)" class="f">displayLabel</span> ( <span onmouseout="hideTip(event, 'fs112', 231)" onmouseover="showTip(event, 'fs112', 231)" class="i">msg</span> <span class="o">:</span> <span class="i">IMod</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs52', 232)" onmouseover="showTip(event, 'fs52', 232)" class="i">string</span><span class="o">&gt;</span> ) ( <span onmouseout="hideTip(event, 'fs113', 233)" onmouseover="showTip(event, 'fs113', 233)" class="i">lab</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs109', 234)" onmouseover="showTip(event, 'fs109', 234)" class="i">Windows</span><span class="o">.</span><span class="i">Controls</span><span class="o">.</span><span class="i">Label</span> ) <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs112', 235)" onmouseover="showTip(event, 'fs112', 235)" class="i">msg</span> <span class="o">|&gt;</span> <span class="i">Mod</span><span class="o">.</span><span class="i">unsafeRegisterCallbackKeepDisposable</span> ( <span class="k">fun</span> <span class="i">ns</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs113', 236)" onmouseover="showTip(event, 'fs113', 236)" class="i">lab</span><span class="o">.</span><span class="i">Content</span> <span class="o">&lt;-</span> <span class="i">ns</span>) 
</code></pre></td>
</tr>
</table>

<p>The function <code>Mod.unsafeRegisterCallbackKeepDisposable</code> explicitly registers a callback on the value change event of a mod. There are more subtle ways
of integrating something with the Mod system.</p>

<p>Overall, the integration of XAML into the app creation workflow worked decently well, but I can't help but wonder if XAML is actually worth it.</p>

<h3><a name="Fixed-Size-Arrays-in-FShade" class="anchor" href="#Fixed-Size-Arrays-in-FShade">Fixed Size Arrays in FShade</a></h3>

<p>GLSL does not allow arrays with dynamic size. To use arrays with a fixed size (but variable content) in your shader uniforms, <code>Aardvark.Base</code> contains a utility
which is used like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs116', 239)" onmouseover="showTip(event, 'fs116', 239)" class="i">arr</span> <span class="o">=</span> [| <span class="n">1</span>; <span class="n">2</span>; <span class="n">3</span>; <span class="n">4</span> |]                                  

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs117', 240)" onmouseover="showTip(event, 'fs117', 240)" class="i">fixedArr</span> <span class="o">=</span> <span class="i">adaptive</span> {                                 <span class="c">//array size fixed, but content may change</span>
            <span class="k">return</span> <span onmouseout="hideTip(event, 'fs116', 241)" onmouseover="showTip(event, 'fs116', 241)" class="i">arr</span>
        }

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs118', 242)" onmouseover="showTip(event, 'fs118', 242)" class="i">scenegraph</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs114', 243)" onmouseover="showTip(event, 'fs114', 243)" class="i">isg</span>
                     <span class="o">|&gt;</span> <span class="i">Sg</span><span class="o">.</span><span class="i">uniform</span> <span class="s">&quot;MyArray&quot;</span> <span onmouseout="hideTip(event, 'fs117', 244)" onmouseover="showTip(event, 'fs117', 244)" class="i">fixedArr</span>         <span class="c">//IMod of array</span>

    <span class="k">type</span> <span class="i">UniformScope</span> <span class="k">with</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs25', 245)" onmouseover="showTip(event, 'fs25', 245)" class="i">x</span><span class="o">.</span><span class="i">MyArray</span> <span class="o">:</span> <span class="i">Arr</span><span class="o">&lt;</span><span class="i">N</span><span class="o">&lt;</span><span class="n">4</span><span class="o">&gt;</span>, <span onmouseout="hideTip(event, 'fs10', 246)" onmouseover="showTip(event, 'fs10', 246)" class="i">int</span><span class="o">&gt;</span> <span class="o">=</span> <span class="i">uniform</span><span class="o">?</span><span class="i">MyArray</span>   <span class="c">//type Arr with generic parameters: N&lt;size&gt; and content type</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs119', 247)" onmouseover="showTip(event, 'fs119', 247)" class="i">shader</span> <span class="o">=</span> <span class="i">vertex</span> {
                <span class="k">let</span> <span class="i">test</span> <span class="o">=</span> <span class="i">uniform</span><span class="o">.</span><span class="i">MyArray</span>                    
                <span class="k">let</span> <span class="i">z</span> <span class="o">=</span> <span class="i">test</span><span class="o">.</span>[<span class="n">0</span>]                              <span class="c">//array-indexing in shader</span>
                <span class="k">return</span> <span class="i">z</span>
        } 
</code></pre></td>
</tr>
</table>

<p><em>The end.</em></p>

          <div class="tip" id="fs1">Multiple items<br />type EntryPointAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; EntryPointAttribute<br /><br />Full name: Tutorial.EntryPointAttribute<br /><br />--------------------<br />new : unit -&gt; EntryPointAttribute</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">Multiple items<br />type Attribute =<br />&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member IsDefaultAttribute : unit -&gt; bool<br />&#160;&#160;member Match : obj:obj -&gt; bool<br />&#160;&#160;member TypeId : obj<br />&#160;&#160;static member GetCustomAttribute : element:MemberInfo * attributeType:Type -&gt; Attribute + 7 overloads<br />&#160;&#160;static member GetCustomAttributes : element:MemberInfo -&gt; Attribute[] + 15 overloads<br />&#160;&#160;static member IsDefined : element:MemberInfo * attributeType:Type -&gt; bool + 7 overloads<br /><br />Full name: System.Attribute<br /><br />--------------------<br />System.Attribute() : unit</div>
<div class="tip" id="fs4">type Fruit =<br />&#160;&#160;| Apple<br />&#160;&#160;| Pear<br /><br />Full name: Tutorial.Program.Fruit</div>
<div class="tip" id="fs5">union case Fruit.Apple: Fruit</div>
<div class="tip" id="fs6">union case Fruit.Pear: Fruit</div>
<div class="tip" id="fs7">type Product =<br />&#160;&#160;{Ware: Fruit;<br />&#160;&#160;&#160;Price: int;}<br /><br />Full name: Tutorial.Program.Product</div>
<div class="tip" id="fs8">Product.Ware: Fruit</div>
<div class="tip" id="fs9">Product.Price: int</div>
<div class="tip" id="fs10">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs11">val main : argv:&#39;a -&gt; int<br /><br />Full name: Tutorial.Program.main</div>
<div class="tip" id="fs12">val argv : &#39;a</div>
<div class="tip" id="fs13">val money : int</div>
<div class="tip" id="fs14">val stock : Product list</div>
<div class="tip" id="fs15">val shoppingBasket : Product list</div>
<div class="tip" id="fs16">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs17">val filter : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.filter</div>
<div class="tip" id="fs18">val i : Product</div>
<div class="tip" id="fs19">val checkout : int</div>
<div class="tip" id="fs20">val fold : folder:(&#39;State -&gt; &#39;T -&gt; &#39;State) -&gt; state:&#39;State -&gt; list:&#39;T list -&gt; &#39;State<br /><br />Full name: Microsoft.FSharp.Collections.List.fold</div>
<div class="tip" id="fs21">val xs : int</div>
<div class="tip" id="fs22">val x : Product</div>
<div class="tip" id="fs23">val printf : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printf</div>
<div class="tip" id="fs24">module Example<br /><br />from Tutorial</div>
<div class="tip" id="fs25">val x : int<br /><br />Full name: Tutorial.Example.x</div>
<div class="tip" id="fs26">val mutable y : int<br /><br />Full name: Tutorial.Example.y</div>
<div class="tip" id="fs27">val rockstar : int<br /><br />Full name: Tutorial.Example.rockstar</div>
<div class="tip" id="fs28">val guitar : int</div>
<div class="tip" id="fs29">val bass : int</div>
<div class="tip" id="fs30">val strings : int</div>
<div class="tip" id="fs31">val frets : int</div>
<div class="tip" id="fs32">val mutable drums : int</div>
<div class="tip" id="fs33">val main : argv:&#39;a -&gt; int<br /><br />Full name: Tutorial.Example.main</div>
<div class="tip" id="fs34">val mult : a:int -&gt; b:int -&gt; int<br /><br />Full name: Tutorial.Example.mult</div>
<div class="tip" id="fs35">val a : int</div>
<div class="tip" id="fs36">val b : int</div>
<div class="tip" id="fs37">val timesTwo : b:int -&gt; int<br /><br />Full name: Tutorial.Example.timesTwo</div>
<div class="tip" id="fs38">val sum : a:int * b:int -&gt; int<br /><br />Full name: Tutorial.Example.sum</div>
<div class="tip" id="fs39">val applyFunction : f:(int -&gt; int) -&gt; x:int -&gt; int<br /><br />Full name: Tutorial.Example.applyFunction</div>
<div class="tip" id="fs40">val f : (int -&gt; int)</div>
<div class="tip" id="fs41">val x : int</div>
<div class="tip" id="fs42">val someFunction : number:int -&gt; int<br /><br />Full name: Tutorial.Example.someFunction</div>
<div class="tip" id="fs43">val number : int</div>
<div class="tip" id="fs44">val result : int<br /><br />Full name: Tutorial.Example.result</div>
<div class="tip" id="fs45">val x : &#39;a</div>
<div class="tip" id="fs46">val f : (&#39;a -&gt; &#39;b)</div>
<div class="tip" id="fs47">val tluser : int<br /><br />Full name: Tutorial.Example.tluser</div>
<div class="tip" id="fs48">val tuple : int * int * int * int<br /><br />Full name: Tutorial.Example.tuple</div>
<div class="tip" id="fs49">type Record&lt;&#39;a&gt; =<br />&#160;&#160;{Somefield: &#39;a;<br />&#160;&#160;&#160;Otherfield: string;<br />&#160;&#160;&#160;Evenmore: float * obj;}<br /><br />Full name: Tutorial.Example.Record&lt;_&gt;</div>
<div class="tip" id="fs50">Record.Somefield: &#39;a</div>
<div class="tip" id="fs51">Record.Otherfield: string</div>
<div class="tip" id="fs52">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs53">Record.Evenmore: float * obj</div>
<div class="tip" id="fs54">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs55">val myRecord : Record&lt;int&gt;<br /><br />Full name: Tutorial.Example.myRecord</div>
<div class="tip" id="fs56">val secondRecord : Record&lt;int&gt;<br /><br />Full name: Tutorial.Example.secondRecord</div>
<div class="tip" id="fs57">type EitherOr =<br />&#160;&#160;| Nothing<br />&#160;&#160;| Something of int<br />&#160;&#160;| TwoThings of int * int<br /><br />Full name: Tutorial.Example.EitherOr</div>
<div class="tip" id="fs58">union case EitherOr.Nothing: EitherOr</div>
<div class="tip" id="fs59">union case EitherOr.Something: int -&gt; EitherOr</div>
<div class="tip" id="fs60">union case EitherOr.TwoThings: int * int -&gt; EitherOr</div>
<div class="tip" id="fs61">val tryMe : EitherOr<br /><br />Full name: Tutorial.Example.tryMe</div>
<div class="tip" id="fs62">val triedYou : int<br /><br />Full name: Tutorial.Example.triedYou</div>
<div class="tip" id="fs63">val y : int</div>
<div class="tip" id="fs64">Multiple items<br />type Awesome =<br />&#160;&#160;new : name:string * value:int -&gt; Awesome<br />&#160;&#160;member DoSomething : unit -&gt; unit<br />&#160;&#160;member Name : string<br />&#160;&#160;member Value : int<br />&#160;&#160;member private Name : string with set<br /><br />Full name: Tutorial.Example.Awesome<br /><br />--------------------<br />new : name:string * value:int -&gt; Awesome</div>
<div class="tip" id="fs65">val name : string</div>
<div class="tip" id="fs66">val value : int</div>
<div class="tip" id="fs67">val mutable name : string</div>
<div class="tip" id="fs68">val x : Awesome</div>
<div class="tip" id="fs69">member Awesome.Value : int<br /><br />Full name: Tutorial.Example.Awesome.Value</div>
<div class="tip" id="fs70">member private Awesome.Name : string with set<br /><br />Full name: Tutorial.Example.Awesome.Name</div>
<div class="tip" id="fs71">val set : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.set</div>
<div class="tip" id="fs72">val v : string</div>
<div class="tip" id="fs73">member Awesome.DoSomething : unit -&gt; unit<br /><br />Full name: Tutorial.Example.Awesome.DoSomething</div>
<div class="tip" id="fs74">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs75">val list1 : int list<br /><br />Full name: Tutorial.Example.list1</div>
<div class="tip" id="fs76">val list2 : int list<br /><br />Full name: Tutorial.Example.list2</div>
<div class="tip" id="fs77">val b : int<br /><br />Full name: Tutorial.Example.b</div>
<div class="tip" id="fs78">val list3 : int list<br /><br />Full name: Tutorial.Example.list3</div>
<div class="tip" id="fs79">val theSame : obj<br /><br />Full name: Tutorial.Example.theSame</div>
<div class="tip" id="fs80">val changing : obj<br /><br />Full name: Tutorial.Example.changing</div>
<div class="tip" id="fs81">val complex : obj<br /><br />Full name: Tutorial.Example.complex</div>
<div class="tip" id="fs82">val currentResult : obj<br /><br />Full name: Tutorial.Example.currentResult</div>
<div class="tip" id="fs83">val newResult : obj<br /><br />Full name: Tutorial.Example.newResult</div>
<div class="tip" id="fs84">val bikes : obj<br /><br />Full name: Tutorial.Example.bikes</div>
<div class="tip" id="fs85">val skates : obj<br /><br />Full name: Tutorial.Example.skates</div>
<div class="tip" id="fs86">val transport : obj<br /><br />Full name: Tutorial.Example.transport</div>
<div class="tip" id="fs87">val output1 : obj<br /><br />Full name: Tutorial.Example.output1</div>
<div class="tip" id="fs88">val success : obj<br /><br />Full name: Tutorial.Example.success</div>
<div class="tip" id="fs89">val output2 : obj<br /><br />Full name: Tutorial.Example.output2</div>
<div class="tip" id="fs90">val coolISg : vt:&#39;a -&gt; pt:&#39;b -&gt; ig:&#39;c -&gt; &#39;d<br /><br />Full name: Tutorial.Example.coolISg</div>
<div class="tip" id="fs91">val vt : &#39;a</div>
<div class="tip" id="fs92">val pt : &#39;b</div>
<div class="tip" id="fs93">val ig : &#39;c</div>
<div class="tip" id="fs94">val smallISg : obj</div>
<div class="tip" id="fs95">val largeISg : obj</div>
<div class="tip" id="fs96">val compiled : isg:&#39;a -&gt; app:&#39;b -&gt; rc:&#39;c -&gt; &#39;d<br /><br />Full name: Tutorial.Example.compiled</div>
<div class="tip" id="fs97">val isg : &#39;a</div>
<div class="tip" id="fs98">val app : &#39;b</div>
<div class="tip" id="fs99">val rc : &#39;c</div>
<div class="tip" id="fs100">val task : obj</div>
<div class="tip" id="fs101">namespace System.Runtime</div>
<div class="tip" id="fs102">val colorRed : red:&#39;a -&gt; v:&#39;b -&gt; &#39;c<br /><br />Full name: Tutorial.Example.colorRed</div>
<div class="tip" id="fs103">val red : &#39;a</div>
<div class="tip" id="fs104">type bool = Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs105">val v : &#39;b</div>
<div class="tip" id="fs106">val redColor : obj</div>
<div class="tip" id="fs107">val modSlider : slider:&#39;a -&gt; &#39;b<br /><br />Full name: Tutorial.Example.modSlider</div>
<div class="tip" id="fs108">val slider : &#39;a</div>
<div class="tip" id="fs109">namespace System.Windows</div>
<div class="tip" id="fs110">val res : obj</div>
<div class="tip" id="fs111">val displayLabel : msg:&#39;a -&gt; lab:&#39;b -&gt; &#39;c<br /><br />Full name: Tutorial.Example.displayLabel</div>
<div class="tip" id="fs112">val msg : &#39;a</div>
<div class="tip" id="fs113">val lab : &#39;b</div>
<div class="tip" id="fs114">val isg : obj<br /><br />Full name: Tutorial.Example.isg</div>
<div class="tip" id="fs115">val failwith : message:string -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.failwith</div>
<div class="tip" id="fs116">val arr : int []<br /><br />Full name: Tutorial.Example.arr</div>
<div class="tip" id="fs117">val fixedArr : obj<br /><br />Full name: Tutorial.Example.fixedArr</div>
<div class="tip" id="fs118">val scenegraph : obj<br /><br />Full name: Tutorial.Example.scenegraph</div>
<div class="tip" id="fs119">val shader : obj<br /><br />Full name: Tutorial.Example.shader</div>
          
        </div>
        <div class="span3">
			
		  <img src="logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
		  
          <ul class="nav nav-list" id="menu">
            <li class="nav-header">Terrain Generator</li>
            <li><a href="../index.html">Blog</a></li>
			<li class="divider"></li>
			<li><a href="../stuff/terraingenerator.html">Terrain Generator</a></li>
            <!--

              Here you can add links to other pages of the documentation 
              The 'divider' element creates a separator and additional
              'nav-header' can be used to add sub-headings in the menu:

              * <li class="divider"></li>
              * <li><a href="...">...</a></li>
              * <li class="nav-header">Sub-heading</li>

            -->
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/aszabo314/FSketch"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  </body>
</html>